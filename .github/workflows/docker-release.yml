name: Release Docker Images

on:
  release:
    types:
      - released
    branches:
      - main

jobs:
  build-80:
    uses: determined-development/laravel-ci/.github/workflows/build-image.yml@main
    with:
      image-name: 'php8.0'
      tags: "ddsam/laravel-ci:php8.0,ddsam/laravel-ci:php8.0-${{github.ref_name}},ddsam/laravel-ci:-php8.0-latest"
    secrets: inherit
  build-81:
    uses: determined-development/laravel-ci/.github/workflows/build-image.yml@main
    with:
      image-name: 'php8.1'
      tags: 'ddsam/laravel-ci:php8.1,ddsam/laravel-ci:php8.1-${{github.ref_name}},ddsam/laravel-ci:php8.1-latest'
    secrets: inherit
  build-82:
    uses: determined-development/laravel-ci/.github/workflows/build-image.yml@main
    with:
      image-name: 'php8.2'
      tags: 'ddsam/laravel-ci:php8.2,ddsam/laravel-ci:php8.2-${{github.ref_name}},ddsam/laravel-ci:php8.2-latest'
    secrets: inherit